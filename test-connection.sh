#!/bin/bash
# ะขะตัั ะฟะพะดะบะปััะตะฝะธั ะบ ัะฐะนัั

echo "๐ ะขะตััะธัะพะฒะฐะฝะธะต ะฟะพะดะบะปััะตะฝะธั ะบ ัะฐะนัั..."
echo ""

DOMAIN="kibitkostreamappv.pp.ua"

# ะัะพะฒะตัะบะฐ ั localhost
echo "1. ะัะพะฒะตัะบะฐ ัะตัะตะท localhost:"
if curl -s -o /dev/null -w "%{http_code}" --max-time 5 http://localhost | grep -q "200\|301\|302"; then
    echo "โ Localhost ะพัะฒะตัะฐะตั"
else
    echo "โ Localhost ะฝะต ะพัะฒะตัะฐะตั"
    curl -I http://localhost 2>&1 | head -3
fi
echo ""

# ะัะพะฒะตัะบะฐ ัะตัะตะท ะดะพะผะตะฝ
echo "2. ะัะพะฒะตัะบะฐ ัะตัะตะท ะดะพะผะตะฝ $DOMAIN:"
HTTP_CODE=$(curl -s -o /dev/null -w "%{http_code}" --max-time 10 http://$DOMAIN 2>&1)
if [ "$HTTP_CODE" = "200" ] || [ "$HTTP_CODE" = "301" ] || [ "$HTTP_CODE" = "302" ]; then
    echo "โ ะะพะผะตะฝ ะพัะฒะตัะฐะตั (HTTP ะบะพะด: $HTTP_CODE)"
elif [ "$HTTP_CODE" = "000" ]; then
    echo "โ ะะพะผะตะฝ ะะ ะพัะฒะตัะฐะตั (ะฝะต ัะดะฐะปะพัั ะฟะพะดะบะปััะธัััั)"
    echo "   ะะพะทะผะพะถะฝัะต ะฟัะธัะธะฝั:"
    echo "   - DNS ะฝะต ะฝะฐัััะพะตะฝ ะธะปะธ ัะบะฐะทัะฒะฐะตั ะฝะต ััะดะฐ"
    echo "   - ะะพะผะตะฝ ะฝะต ัะบะฐะทัะฒะฐะตั ะฝะฐ IP ัะตัะฒะตัะฐ: 195.133.17.131"
else
    echo "โ๏ธ  ะะพะผะตะฝ ะพัะฒะตัะฐะตั ั ะบะพะดะพะผ: $HTTP_CODE"
    curl -I http://$DOMAIN 2>&1 | head -5
fi
echo ""

# ะัะพะฒะตัะบะฐ DNS
echo "3. ะัะพะฒะตัะบะฐ DNS:"
DNS_IP=$(dig +short $DOMAIN | tail -1)
if [ -n "$DNS_IP" ]; then
    echo "   DNS ัะบะฐะทัะฒะฐะตั ะฝะฐ: $DNS_IP"
    if [ "$DNS_IP" = "195.133.17.131" ]; then
        echo "โ DNS ะฝะฐัััะพะตะฝ ะฟัะฐะฒะธะปัะฝะพ"
    else
        echo "โ DNS ัะบะฐะทัะฒะฐะตั ะฝะต ะฝะฐ ััะพั ัะตัะฒะตั!"
        echo "   ะะถะธะดะฐะปะพัั: 195.133.17.131"
        echo "   ะะพะปััะตะฝะพ: $DNS_IP"
    fi
else
    echo "โ DNS ะฝะต ะฝะฐัััะพะตะฝ ะธะปะธ ะฝะต ัะตะทะพะปะฒะธััั"
fi
echo ""

# ะัะพะฒะตัะบะฐ ะฝะฐะฟััะผัั ะฟะพ IP
echo "4. ะัะพะฒะตัะบะฐ ะฝะฐะฟััะผัั ะฟะพ IP:"
SERVER_IP="195.133.17.131"
HTTP_CODE_IP=$(curl -s -o /dev/null -w "%{http_code}" --max-time 10 -H "Host: $DOMAIN" http://$SERVER_IP 2>&1)
if [ "$HTTP_CODE_IP" = "200" ] || [ "$HTTP_CODE_IP" = "301" ] || [ "$HTTP_CODE_IP" = "302" ]; then
    echo "โ ะกะตัะฒะตั ะพัะฒะตัะฐะตั ะฟะพ IP ั ะฟัะฐะฒะธะปัะฝัะผ Host header"
else
    echo "โ๏ธ  ะกะตัะฒะตั ะพัะฒะตัะฐะตั ั ะบะพะดะพะผ: $HTTP_CODE_IP"
fi
echo ""

echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "๐ ะะะะะะะะะะฆะะ:"
echo ""
echo "ะัะปะธ ัะฐะนั ะฝะต ะพัะบััะฒะฐะตััั:"
echo "1. ะัะพะฒะตัััะต DNS - ะดะพะผะตะฝ ะดะพะปะถะตะฝ ัะบะฐะทัะฒะฐัั ะฝะฐ 195.133.17.131"
echo "2. ะะพะฟัะพะฑัะนัะต ะพัะบัััั ัะตัะตะท IP: http://195.133.17.131"
echo "3. ะฃะฑะตะดะธัะตัั ััะพ ะธัะฟะพะปัะทัะตัะต HTTP (ะฝะต HTTPS ะตัะปะธ SSL ะฝะต ะฝะฐัััะพะตะฝ)"
echo ""
echo "ะัะปะธ DNS ะฝะต ะฝะฐัััะพะตะฝ:"
echo "  ะะพะฑะฐะฒััะต A-ะทะฐะฟะธัั ะฒ DNS ะฟัะพะฒะฐะนะดะตัะต:"
echo "  kibitkostreamappv.pp.ua -> 195.133.17.131"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"

