@echo off
chcp 65001 > nul
color 0A
title LiveKit Desktop Recorder - Ð¡Ð±Ð¾Ñ€ÐºÐ° Windows EXE

echo.
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo   ðŸŽ¬ LiveKit Desktop Recorder
echo   ðŸ“¦ Ð¡Ð±Ð¾Ñ€ÐºÐ° Windows EXE
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.

REM ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Python
echo [1/5] ðŸ” ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Python...
python --version 2>nul
if errorlevel 1 (
    echo.
    echo âŒ ÐžÐ¨Ð˜Ð‘ÐšÐ: Python Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½!
    echo.
    echo ðŸ“¥ Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Python 3.10+ Ñ ÑÐ°Ð¹Ñ‚Ð°:
    echo    https://www.python.org/downloads/
    echo.
    echo âš ï¸  ÐŸÑ€Ð¸ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐµ Ð¿Ð¾ÑÑ‚Ð°Ð²ÑŒÑ‚Ðµ Ð³Ð°Ð»Ð¾Ñ‡ÐºÑƒ:
    echo    â˜‘ Add Python to PATH
    echo.
    pause
    exit /b 1
)
echo âœ… Python ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½
echo.

REM ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ pip
echo [2/5] ðŸ“¦ ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ pip...
python -m pip install --upgrade pip --quiet
if errorlevel 1 (
    echo âš ï¸  ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð¾Ð±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ pip, Ð¿Ñ€Ð¾Ð´Ð¾Ð»Ð¶Ð°ÐµÐ¼...
) else (
    echo âœ… pip Ð¾Ð±Ð½Ð¾Ð²Ð»Ñ‘Ð½
)
echo.

REM Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹
echo [3/5] ðŸ“š Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹...
echo    - mss (Ð·Ð°Ñ…Ð²Ð°Ñ‚ ÑÐºÑ€Ð°Ð½Ð°)
echo    - opencv-python (Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ð²Ð¸Ð´ÐµÐ¾)
echo    - requests (Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€)
echo    - Pillow (Ð¸ÐºÐ¾Ð½ÐºÐ¸)
echo    - pystray (ÑÐ¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ð¹ Ñ‚Ñ€ÐµÐ¹)
echo    - numpy (Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ð¼Ð°ÑÑÐ¸Ð²Ð¾Ð²)
echo    - pyinstaller (ÑÐ±Ð¾Ñ€ÐºÐ° EXE)
echo.
python -m pip install -r requirements.txt --quiet
if errorlevel 1 (
    echo.
    echo âŒ ÐžÐ¨Ð˜Ð‘ÐšÐ: ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸!
    echo.
    echo ðŸ’¡ ÐŸÐ¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð²Ñ€ÑƒÑ‡Ð½ÑƒÑŽ:
    echo    python -m pip install -r requirements.txt
    echo.
    pause
    exit /b 1
)
echo âœ… Ð’ÑÐµ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ñ‹
echo.

REM Ð¡Ð±Ð¾Ñ€ÐºÐ° EXE
echo [4/5] ðŸ”¨ Ð¡Ð±Ð¾Ñ€ÐºÐ° EXE Ñ„Ð°Ð¹Ð»Ð°...
echo    Ð­Ñ‚Ð¾ Ð·Ð°Ð¹Ð¼Ñ‘Ñ‚ 1-2 Ð¼Ð¸Ð½ÑƒÑ‚Ñ‹...
echo.
python -m PyInstaller build.spec --noconfirm --clean
if errorlevel 1 (
    echo.
    echo âŒ ÐžÐ¨Ð˜Ð‘ÐšÐ: ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ ÑÐ¾Ð±Ñ€Ð°Ñ‚ÑŒ EXE!
    echo.
    echo ðŸ’¡ ÐŸÐ¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ Ð²Ñ€ÑƒÑ‡Ð½ÑƒÑŽ:
    echo    python -m PyInstaller build.spec
    echo.
    pause
    exit /b 1
)
echo.
echo âœ… EXE Ñ„Ð°Ð¹Ð» ÑÐ¾Ð±Ñ€Ð°Ð½ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾!
echo.

REM ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð°
echo [5/5] ðŸŽ¯ ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð°...
if exist "dist\LiveKitRecorder.exe" (
    echo.
    echo â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
    echo â•‘  âœ… Ð“ÐžÐ¢ÐžÐ’Ðž!                                           â•‘
    echo â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    echo.
    echo ðŸ“ ÐœÐµÑÑ‚Ð¾Ð¿Ð¾Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ:
    echo    %CD%\dist\LiveKitRecorder.exe
    echo.
    echo ðŸ“Š Ð Ð°Ð·Ð¼ÐµÑ€ Ñ„Ð°Ð¹Ð»Ð°:
    for %%A in ("dist\LiveKitRecorder.exe") do echo    %%~zA Ð±Ð°Ð¹Ñ‚
    echo.
    echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    echo   ðŸš€ ÐšÐÐš Ð˜Ð¡ÐŸÐžÐ›Ð¬Ð—ÐžÐ’ÐÐ¢Ð¬:
    echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    echo.
    echo 1. Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ LiveKitRecorder.exe
    echo 2. Ð’Ð¾Ð¹Ñ‚Ð¸ (Ð»Ð¾Ð³Ð¸Ð½/Ð¿Ð°Ñ€Ð¾Ð»ÑŒ)
    echo 3. Ð’Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ ÑÐºÑ€Ð°Ð½Ñ‹ Ð´Ð»Ñ Ð·Ð°Ð¿Ð¸ÑÐ¸:
    echo    â˜‘ Ð­ÐºÑ€Ð°Ð½ 1 - Ð¾Ð´Ð¸Ð½ Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€
    echo    â˜‘ Ð­ÐºÑ€Ð°Ð½ 1 + Ð­ÐºÑ€Ð°Ð½ 2 - Ð¾Ð±Ð° Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð° (ÑÐºÐ»ÐµÐµÐ½Ñ‹)
    echo 4. ÐÐ°Ñ‡Ð°Ñ‚ÑŒ Ð·Ð°Ð¿Ð¸ÑÑŒ
    echo 5. Ð¡Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒ Ð² Ñ‚Ñ€ÐµÐ¹ (Ð·Ð°Ð¿Ð¸ÑÑŒ Ð² Ñ„Ð¾Ð½Ðµ)
    echo 6. ÐŸÐµÑ€ÐµÐºÐ»ÑŽÑ‡Ð°Ñ‚ÑŒ Ð²Ð¸Ñ€Ñ‚ÑƒÐ°Ð»ÑŒÐ½Ñ‹Ðµ ÑÑ‚Ð¾Ð»Ñ‹ - Ð’Ð¡Ð Ð±ÑƒÐ´ÐµÑ‚ Ð² Ð·Ð°Ð¿Ð¸ÑÐ¸!
    echo.
    echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    echo   ðŸ“Œ Ð’ÐÐ–ÐÐž:
    echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    echo.
    echo â€¢ ÐÐ²Ñ‚Ð¾ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ: ÐºÐ°Ð¶Ð´Ñ‹Ðµ 5 Ð¼Ð¸Ð½ÑƒÑ‚
    echo â€¢ Ð’Ð¸Ñ€Ñ‚ÑƒÐ°Ð»ÑŒÐ½Ñ‹Ðµ ÑÑ‚Ð¾Ð»Ñ‹: Ð²Ð¸Ð´Ð½Ñ‹ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸
    echo â€¢ ÐÐµÑÐºÐ¾Ð»ÑŒÐºÐ¾ Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¾Ð²: ÑÐºÐ»ÐµÐ¸Ð²Ð°ÑŽÑ‚ÑÑ Ð² Ð¾Ð´Ð½Ð¾ Ð²Ð¸Ð´ÐµÐ¾
    echo â€¢ Ð Ð°Ð±Ð¾Ñ‚Ð° Ð² Ñ„Ð¾Ð½Ðµ: Ñ‡ÐµÑ€ÐµÐ· ÑÐ¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ð¹ Ñ‚Ñ€ÐµÐ¹
    echo.
    echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    echo.
    
    REM ÐŸÑ€ÐµÐ´Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚ÑŒ Ð¿Ð°Ð¿ÐºÑƒ
    set /p OPEN="ÐžÑ‚ÐºÑ€Ñ‹Ñ‚ÑŒ Ð¿Ð°Ð¿ÐºÑƒ Ñ EXE? (y/n): "
    if /i "%OPEN%"=="y" (
        explorer.exe "%CD%\dist"
    )
) else (
    echo.
    echo âŒ ÐžÐ¨Ð˜Ð‘ÐšÐ: Ð¤Ð°Ð¹Ð» LiveKitRecorder.exe Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½!
    echo.
    echo ðŸ’¡ ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð»Ð¾Ð³Ð¸ Ð²Ñ‹ÑˆÐµ Ð½Ð° Ð½Ð°Ð»Ð¸Ñ‡Ð¸Ðµ Ð¾ÑˆÐ¸Ð±Ð¾Ðº.
    echo.
    pause
    exit /b 1
)

echo.
echo Ð”Ð»Ñ Ð²Ñ‹Ñ…Ð¾Ð´Ð° Ð½Ð°Ð¶Ð¼Ð¸Ñ‚Ðµ Ð»ÑŽÐ±ÑƒÑŽ ÐºÐ»Ð°Ð²Ð¸ÑˆÑƒ...
pause > nul
