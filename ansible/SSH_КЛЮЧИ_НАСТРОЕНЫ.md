# ‚úÖ SSH –∫–ª—é—á–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –Ω–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö!

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

SSH –∫–ª—é—á `id_ed25519` —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö 5 —Å–µ—Ä–≤–µ—Ä–∞—Ö:

- ‚úÖ 195.133.17.131 (server1) - —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ 195.133.17.179 (server2) - —Ä–∞–±–æ—Ç–∞–µ—Ç  
- ‚úÖ 195.133.39.17 (server3) - —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ 195.133.39.33 (server4) - —Ä–∞–±–æ—Ç–∞–µ—Ç (—Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω)
- ‚úÖ 195.133.39.41 (server5) - —Ä–∞–±–æ—Ç–∞–µ—Ç

## üìù –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

1. **–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω SSH –∫–ª—é—á –Ω–∞ server2, server3, server4, server5**
2. **–û–±–Ω–æ–≤–ª–µ–Ω `ansible.cfg`** - –¥–æ–±–∞–≤–ª–µ–Ω `private_key_file = ~/.ssh/id_ed25519`
3. **–û–±–Ω–æ–≤–ª–µ–Ω `ssh_args`** - –¥–æ–±–∞–≤–ª–µ–Ω `PreferredAuthentications=publickey,password`

## üîß –ö–∞–∫ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç

Ansible –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
1. **–°–Ω–∞—á–∞–ª–∞ SSH –∫–ª—é—á** (–±—ã—Å—Ç—Ä–æ –∏ –±–µ–∑ –ø–∞—Ä–æ–ª–µ–π)
2. **–ó–∞—Ç–µ–º –ø–∞—Ä–æ–ª—å –∏–∑ inventory** (–µ—Å–ª–∏ –∫–ª—é—á –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)

## üöÄ –ß—Ç–æ –¥–∞–ª—å—à–µ

–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ:
1. **–£–±—Ä–∞—Ç—å –ø–∞—Ä–æ–ª–∏ –∏–∑ inventory.ini** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ fallback)
2. **–ó–∞–ø—É—Å—Ç–∏—Ç—å playbook** - –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ server4 –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å!

```bash
cd ansible
ansible-playbook playbook.yml
```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –±–µ–∑ –ø–∞—Ä–æ–ª—è
ssh root@195.133.39.33 "echo 'OK'"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á–µ—Ä–µ–∑ Ansible
ansible server4 -m ping
```

## üìù –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: —É–±—Ä–∞—Ç—å –ø–∞—Ä–æ–ª–∏ –∏–∑ inventory.ini

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ SSH –∫–ª—é—á–∏, –º–æ–∂–Ω–æ —É–±—Ä–∞—Ç—å `ansible_ssh_pass` —Å—Ç—Ä–æ–∫–∏:

```ini
[all]
server1 ansible_host=195.133.17.131 ansible_user=root
server2 ansible_host=195.133.17.179 ansible_user=root
# –∏ —Ç.–¥.
```

–ù–æ –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –ø–∞—Ä–æ–ª–∏ –∫–∞–∫ –µ—Å—Ç—å - –æ–Ω–∏ –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∫–ª—é—á –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.

