âš ï¸ ĞŸĞ ĞĞ‘Ğ›Ğ•ĞœĞ: ĞĞµ ÑƒĞ´Ğ°Ğ»Ğ¾ÑÑŒ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒÑÑ Ğº LiveKit ÑĞµÑ€Ğ²ĞµÑ€Ñƒ

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ĞŸĞ ĞĞ‘Ğ›Ğ•ĞœĞ: LiveKit Ğ½Ğµ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒÑÑ Ñ‡ĞµÑ€ĞµĞ· Nginx Ğ¿Ñ€Ğ¾ĞºÑĞ¸

Ğ Ğ•Ğ¨Ğ•ĞĞ˜Ğ•: LiveKit Ñ‚Ñ€ĞµĞ±ÑƒĞµÑ‚ Ğ¿Ñ€ÑĞ¼Ğ¾Ğµ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğº Ğ¿Ğ¾Ñ€Ñ‚Ñƒ 7880

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Ğ’ĞĞ Ğ˜ĞĞĞ¢ 1: ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ¿Ğ¾Ñ€Ñ‚ 7880 Ğ½Ğ°Ğ¿Ñ€ÑĞ¼ÑƒÑ (Ğ Ğ•ĞšĞĞœĞ•ĞĞ”Ğ£Ğ•Ğ¢Ğ¡Ğ¯)

1. ĞĞ° ÑĞµÑ€Ğ²ĞµÑ€Ğµ Ğ¾Ñ‚ĞºÑ€Ğ¾Ğ¹Ñ‚Ğµ Ğ¿Ğ¾Ñ€Ñ‚ 7880:

sudo ufw allow 7880/tcp
# Ğ¸Ğ»Ğ¸ ĞµÑĞ»Ğ¸ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ firewall-cmd:
sudo firewall-cmd --permanent --add-port=7880/tcp
sudo firewall-cmd --reload

2. ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚Ğµ config.ts Ğ½Ğ° ÑĞµÑ€Ğ²ĞµÑ€Ğµ:

cat > /www/wwwroot/LiveKit/streamApp/src/config.ts <<'EOF'
// Ğ”Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ°Ñ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Ğ´Ğ»Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ñ‡ĞµÑ€ĞµĞ· Ğ´Ğ¾Ğ¼ĞµĞ½

const getProtocol = () => {
  if (typeof window === 'undefined') return 'http:';
  return window.location.protocol;
};

const getHost = () => {
  if (typeof window === 'undefined') return 'localhost';
  const hostname = window.location.hostname;
  if (hostname !== 'localhost' && hostname !== '127.0.0.1') {
    return hostname;
  }
  return hostname;
};

const isSecure = getProtocol() === 'https:';
const wsProtocol = isSecure ? 'wss:' : 'ws:';
const httpProtocol = isSecure ? 'https:' : 'http:';

const host = getHost();
const isLocal = host === 'localhost' || host === '127.0.0.1';

// API URL
export const API_URL = isLocal 
  ? `${httpProtocol}//${host}:3001`
  : `${httpProtocol}//${host}`;

// LiveKit URL - Ğ¿Ñ€ÑĞ¼Ğ¾Ğµ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğº Ğ¿Ğ¾Ñ€Ñ‚Ñƒ 7880
export const LIVEKIT_URL = `${wsProtocol}//${host}:7880`;

console.log('ğŸŒ ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ:');
console.log('   API:', API_URL);
console.log('   LiveKit:', LIVEKIT_URL);
EOF

3. ĞŸĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚Ğµ daemon Ğ² Ğ¿Ğ°Ğ½ĞµĞ»Ğ¸

4. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ Ñ‡Ñ‚Ğ¾ Ğ¿Ğ¾Ñ€Ñ‚ 7880 Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚:
   netstat -tulpn | grep 7880

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Ğ’ĞĞ Ğ˜ĞĞĞ¢ 2: ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ WebSocket Ñ‡ĞµÑ€ĞµĞ· Nginx (ÑĞ»Ğ¾Ğ¶Ğ½ĞµĞµ)

Ğ•ÑĞ»Ğ¸ Ğ½ÑƒĞ¶ĞµĞ½ WebSocket Ñ‡ĞµÑ€ĞµĞ· Nginx, Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ fix-livekit-nginx.sh

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ĞŸĞ¾ÑĞ»Ğµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ config.ts Ğ¿ĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚Ğµ daemon!

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

